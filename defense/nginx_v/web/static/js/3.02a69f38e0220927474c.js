webpackJsonp([3],{"51bQ":function(t,e){},EcVt:function(t,e){},UgZX:function(t,e){},jw7m:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("v6mm"),a=n("zBK0"),s={name:"search",data:function(){return{content:"",records:["liarbry / nginx","mysql / lidabno","ubutu / dh0qwh"],showEllipsis:!1,list:[]}},methods:{search:function(){var t=this,e=this.content;Object(a.g)(e).then(function(e){e.data.forEach(function(e){t.list.push(e.repotags)}),t.$emit("isRepotags",t.list),t.list=[]})}},mounted:function(){var t=this;window.addEventListener("keyup",function(e){13===e.keyCode&&t.search()})}},o={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"search-wrapper"},[n("p",{staticClass:"search-box"},[n("i",{staticClass:"iconfont icon-search"},[t._v("")]),t._v(" "),n("span",{staticClass:"split-line"},[t._v("|")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],staticClass:"search-text clear-edge",attrs:{type:"text",placeholder:"搜索镜像（nginx,mysql,ubutu..."},domProps:{value:t.content},on:{input:function(e){e.target.composing||(t.content=e.target.value)}}}),t._v(" "),n("button",{staticClass:"search-btn clear-edge",on:{click:t.search}},[t._v("搜索")])])])},staticRenderFns:[]};var r=n("VU/8")(s,o,!1,function(t){n("51bQ")},"data-v-2686567c",null).exports,c={props:["isRepo"],data:function(){return{storageList:[],listQuery:{limit:10,page:1},fullscreenLoading:!1,num:0,pullImageMessage:""}},computed:{net:function(){return this.storageList.length>this.listQuery.limit?this.storageList.slice((this.listQuery.page-1)*this.listQuery.limit,this.listQuery.limit*this.listQuery.page):this.storageList},total:function(){return this.storageList.length}},methods:{getStorageList:function(){var t=this;Object(a.d)().then(function(e){e.data.Mirror_list.forEach(function(e){if(null!==e.repotags){var n=e.repotags;"<none>:<none>"===n?t.num=t.num+1:Object(a.c)(n).then(function(n){t.storageList.push({repotag:e.repotags,high:n.data.level.High,medium:n.data.level.Medium,low:n.data.level.Low,negligible:n.data.level.Negligible,createdTime:n.data.dockerImage[0].Created,size:e.size})})}}),t.$message({message:"提示：扫描到"+t.num+"个镜像tag为空，请及时处理。",type:"warning",showClose:"true",duration:1e4})})},handleSizeChange:function(t){this.listQuery.limit=t},handleCurrentChange:function(t){this.listQuery.page=t},handleNewImage:function(){var t=this;this.$prompt("请输入需要添加的镜像(例如：(image:tag))，确定添加请按确定按钮。有些镜像特别大，所以会出现刷新后没有出现镜像，但是镜像库是存在下载的镜像，您需要多刷新几次，就能找到添加的镜像。","提示",{confirmButtonText:"确定",cancelButtonClass:"取消"}).then(function(e){var n=e.value;t.fullscreenLoading=!0,Object(a.f)(n).then(function(e){if(t.pullImageMessage=e.data,-1===e.data.cod)t.$message({type:"error",message:e.data.pill,duration:1e4});else{var n=t.$loading({text:"正在下载，请勿离开",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});setTimeout(function(){n.close(),t.$alert(t.pullImageMessage,"下载过程",{confirmButtonText:"确定",callback:function(e){location.reload(),t.$message({type:"info",message:"数据已加载"})},lockScroll:!1,customClass:"alertMessage",type:"success"})},12e4)}})}).catch(function(){t.$message({type:"info",message:"取消输入"})})},handleDeleteImage:function(t){var e=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(a.a)(t).then(function(t){0===t.data.cod?location.reload():e.$message({type:"info",message:"删除失败"})})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})}},mounted:function(){this.getStorageList()}},l={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"image-table"},[n("h1",[t._v("镜像列表")]),t._v(" "),n("div",{staticClass:"image-btn"},[n("button",{staticClass:"btn-new",on:{click:t.handleNewImage}},[n("i",{staticClass:"iconfont icon-hao  btn-new-icon"},[t._v("\n      ")]),t._v("\n      新建镜像\n    ")])]),t._v(" "),n("div",{staticClass:"ibox-content"},[n("table",[t._m(0),t._v(" "),""==t.isRepo?n("tbody",t._l(t.net,function(e){return n("tr",{key:e.index},[n("td",[n("router-link",{attrs:{to:{path:"overview",query:{repotag:e.repotag}}}},[t._v("\n            "+t._s(e.repotag)+"\n          ")])],1),t._v(" "),t._m(1,!0),t._v(" "),n("td",[n("i",{staticClass:"iconfont icon-system-fn-warning  index-warning icon-red"},[t._v("\n            ")]),t._v(" "),n("span",[t._v(t._s(e.high))]),t._v(" "),n("i",{staticClass:"iconfont icon-system-fn-warning index-warning icon-orange"},[t._v("\n            ")]),t._v(" "),n("span",[t._v(t._s(e.low))]),t._v(" "),n("i",{staticClass:"iconfont icon-system-fn-warning index-warning icon-yellow"},[t._v("\n            ")]),t._v(" "),n("span",[t._v(t._s(e.medium))]),t._v(" "),n("i",{staticClass:"  icon-system-fn-warning index-warning icon-blue"},[t._v("\n            ")]),t._v(" "),n("span",[t._v(t._s(e.negligible))])]),t._v(" "),n("td",[t._v(t._s(new Date(1e3*e.createdTime).toLocaleString()))]),t._v(" "),Math.round(e.size/1024/1024)<1024?n("td",[t._v("\n          "+t._s(Math.round(e.size/1024/1024))+"MB\n        ")]):n("td",[t._v(t._s((e.size/1024/1024/1024).toFixed(1))+"GB")]),t._v(" "),n("td",[n("a",{on:{click:function(n){t.handleDeleteImage(e.repotag)}}},[t._v("删除")])])])})):t._l(t.isRepo,function(e){return n("tbody",{key:e.index},t._l(t.net,function(i){return e==i.repotag?n("tr",{key:i.index},[n("td",[n("router-link",{attrs:{to:{path:"overview",query:{repotag:i.repotag}}}},[t._v("\n            "+t._s(i.repotag)+"\n          ")])],1),t._v(" "),t._m(2,!0),t._v(" "),n("td",[n("i",{staticClass:"iconfont icon-system-fn-warning  index-warning icon-red"},[t._v("\n            ")]),t._v(" "),n("span",[t._v(t._s(i.high))]),t._v(" "),n("i",{staticClass:"iconfont icon-system-fn-warning index-warning icon-orange"},[t._v("\n            ")]),t._v(" "),n("span",[t._v(t._s(i.low))]),t._v(" "),n("i",{staticClass:"iconfont icon-system-fn-warning index-warning icon-yellow"},[t._v("\n            ")]),t._v(" "),n("span",[t._v(t._s(i.medium))]),t._v(" "),n("i",{staticClass:"  icon-system-fn-warning index-warning icon-blue"},[t._v("\n            ")]),t._v(" "),n("span",[t._v(t._s(i.negligible))])]),t._v(" "),n("td",[t._v(t._s(new Date(1e3*i.createdTime).toLocaleString()))]),t._v(" "),Math.round(i.size/1024/1024)<1024?n("td",[t._v("\n          "+t._s(Math.round(i.size/1024/1024))+"MB\n        ")]):n("td",[t._v(t._s((i.size/1024/1024/1024).toFixed(1))+"GB")]),t._v(" "),n("td",[n("a",{attrs:{href:"#"},on:{click:function(e){t.handleDeleteImage(i.repotag)}}},[t._v("删除")])])]):t._e()}))})],2),t._v(" "),n("div",{staticClass:"divblock"},[n("el-pagination",{attrs:{background:"","current-page":t.listQuery.page,"page-sizes":[10,20,40,80],"page-size":t.listQuery.limit,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.$set(t.listQuery,"page",e)},"update:pageSize":function(e){t.$set(t.listQuery,"limit",e)}}})],1)])])},staticRenderFns:[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",[n("tr",[n("th",[t._v("存储库")]),t._v(" "),n("th",[t._v("注册表/类型")]),t._v(" "),n("th",[t._v("安全问题")]),t._v(" "),n("th",[t._v("IMAGE创建时间")]),t._v(" "),n("th",[t._v("SIZE\n          "),n("i",{staticClass:"iconfont icon-descending"},[t._v("")])]),t._v(" "),n("th",[t._v("\n          操作\n        ")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("td",[e("i",{staticClass:"iconfont icon-docker index-warning"},[this._v(" ")]),this._v("\n          官方\n        ")])},function(){var t=this.$createElement,e=this._self._c||t;return e("td",[e("i",{staticClass:"iconfont icon-docker index-warning"},[this._v(" ")]),this._v("\n          官方\n        ")])}]};var u=n("VU/8")(c,l,!1,function(t){n("pNtt"),n("UgZX")},"data-v-8c3f86bc",null).exports,g={data:function(){return{repo:""}},name:"index",components:{Navbar:i.a,Search:r,ImgTable:u},methods:{lisRepotags:function(t){""!==t?this.repo=t:location.reload()}}},d={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"main"},[e("navbar"),this._v(" "),e("div",{staticClass:"search"},[e("search",{on:{isRepotags:this.lisRepotags}})],1),this._v(" "),e("section",{staticClass:"table-wrapper"},[e("img-table",{attrs:{isRepo:this.repo}})],1)],1)},staticRenderFns:[]};var v=n("VU/8")(g,d,!1,function(t){n("EcVt")},"data-v-7b3578e8",null);e.default=v.exports},pNtt:function(t,e){}});
//# sourceMappingURL=3.02a69f38e0220927474c.js.map